<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="iomotorsport Predictions - Data-driven race predictions and analysis for WEC, IMSA, GT World Challenge, and Offroad Endurance. Track our 85% winner accuracy."
    />
    <meta
      name="robots"
      content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
    />
    <meta name="author" content="iomotorsport" />
    <meta
      name="keywords"
      content="race predictions, motorsport predictions, WEC predictions, IMSA predictions, GT World Challenge, Dakar Rally, Le Mans predictions, Daytona 24 predictions, Spa 24 Hours, Baja 1000, endurance racing analysis"
    />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Race Predictions | iomotorsport" />
    <meta
      property="og:description"
      content="Data-driven race predictions and analytics for WEC, IMSA, GT World Challenge, and Offroad Endurance. 85% winner accuracy."
    />
    <meta
      property="og:image"
      content="https://iomotorsport.com/images/og-predictions.jpg"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta
      property="og:url"
      content="https://iomotorsport.com/predictions.html"
    />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Race Predictions | iomotorsport" />
    <meta
      name="twitter:description"
      content="Data-driven race predictions and analysis for WEC, IMSA, and more."
    />
    <meta
      name="twitter:image"
      content="https://iomotorsport.com/images/og-predictions.jpg"
    />
    <link rel="canonical" href="https://iomotorsport.com/predictions.html" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèéÔ∏è</text></svg>"
    />
    <title>Race Predictions | iomotorsport</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <style>
      /* Predictions Page Styles */
      .predictions-nav {
        display: flex;
        gap: 10px;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }

      .predictions-nav button {
        padding: 12px 24px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 30px;
        color: #888;
        font-family: "Inter", sans-serif;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s;
      }

      .predictions-nav button:hover {
        background: rgba(230, 57, 70, 0.1);
        border-color: rgba(230, 57, 70, 0.3);
        color: #fff;
      }

      .predictions-nav button.active {
        background: linear-gradient(135deg, #e63946 0%, #c62828 100%);
        border-color: #e63946;
        color: #fff;
        font-weight: 600;
      }

      .accuracy-banner {
        background: linear-gradient(
          135deg,
          rgba(40, 167, 69, 0.15) 0%,
          rgba(40, 167, 69, 0.05) 100%
        );
        border: 1px solid rgba(40, 167, 69, 0.3);
        border-radius: 16px;
        padding: 30px 40px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 40px;
        flex-wrap: wrap;
        gap: 20px;
      }

      .accuracy-info h3 {
        color: #fff;
        font-size: 1.3rem;
        margin-bottom: 5px;
      }

      .accuracy-info p {
        color: #888;
        font-size: 0.9rem;
      }

      .accuracy-stats {
        display: flex;
        gap: 40px;
      }

      .accuracy-stat {
        text-align: center;
      }

      .accuracy-value {
        font-size: 2.5rem;
        font-weight: 900;
        color: #28a745;
        font-family: "Orbitron", monospace;
      }

      .accuracy-label {
        font-size: 0.75rem;
        color: #888;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      /* Prediction Cards */
      .prediction-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        overflow: hidden;
        margin-bottom: 30px;
        transition: all 0.3s;
      }

      .prediction-card:hover {
        border-color: rgba(230, 57, 70, 0.3);
        transform: translateY(-2px);
      }

      .prediction-card.featured {
        border-color: rgba(230, 57, 70, 0.4);
        box-shadow: 0 0 30px rgba(230, 57, 70, 0.1);
      }

      .featured-badge {
        position: absolute;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, #e63946 0%, #c62828 100%);
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .prediction-header {
        background: linear-gradient(
          135deg,
          rgba(230, 57, 70, 0.15) 0%,
          rgba(230, 57, 70, 0.05) 100%
        );
        padding: 30px;
        position: relative;
      }

      .prediction-race h3 {
        color: #fff;
        font-size: 1.5rem;
        margin-bottom: 10px;
        font-family: "Orbitron", monospace;
      }

      .prediction-meta {
        display: flex;
        gap: 20px;
        color: #888;
        font-size: 0.9rem;
        flex-wrap: wrap;
      }

      .prediction-meta span {
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .series-badge {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 4px;
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
        margin-left: 10px;
      }

      .series-badge.wec {
        background: rgba(230, 57, 70, 0.2);
        color: #e63946;
      }

      .series-badge.imsa {
        background: rgba(0, 123, 255, 0.2);
        color: #007bff;
      }

      .series-badge.gtwc {
        background: rgba(40, 167, 69, 0.2);
        color: #28a745;
      }

      .series-badge.offroad {
        background: rgba(255, 152, 0, 0.2);
        color: #ff9800;
      }

      /* Series Filter Buttons */
      .series-filter {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 25px;
        justify-content: center;
      }

      .series-filter button {
        padding: 10px 20px;
        border: 2px solid #333;
        background: transparent;
        color: #888;
        border-radius: 30px;
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .series-filter button:hover {
        border-color: #666;
        color: #fff;
      }

      .series-filter button.active {
        background: linear-gradient(135deg, #007bff, #0056b3);
        border-color: #007bff;
        color: #fff;
      }

      .series-filter button[data-series="wec"].active {
        background: linear-gradient(135deg, #e63946, #c1121f);
        border-color: #e63946;
      }

      .series-filter button[data-series="imsa"].active {
        background: linear-gradient(135deg, #007bff, #0056b3);
        border-color: #007bff;
      }

      .series-filter button[data-series="gtwc"].active {
        background: linear-gradient(135deg, #28a745, #1e7e34);
        border-color: #28a745;
      }

      .series-filter button[data-series="offroad"].active {
        background: linear-gradient(135deg, #ff9800, #e68900);
        border-color: #ff9800;
      }

      .prediction-confidence {
        margin-top: 20px;
      }

      .confidence-label {
        font-size: 0.75rem;
        color: #888;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 8px;
      }

      .confidence-bar {
        width: 200px;
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        overflow: hidden;
      }

      .confidence-fill {
        height: 100%;
        background: linear-gradient(90deg, #ffc107, #28a745);
        border-radius: 4px;
        transition: width 0.5s ease;
      }

      .confidence-value {
        font-size: 0.85rem;
        color: #28a745;
        margin-top: 5px;
        font-weight: 600;
      }

      .prediction-body {
        padding: 30px;
      }

      .prediction-summary {
        color: #ccc;
        font-size: 1rem;
        line-height: 1.7;
        margin-bottom: 30px;
        padding: 20px;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 12px;
        border-left: 3px solid #e63946;
      }

      /* Podium Grid */
      .podium-section-title {
        color: #fff;
        font-size: 1.1rem;
        margin-bottom: 20px;
        font-family: "Inter", sans-serif;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .podium-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 30px;
      }

      .podium-card {
        text-align: center;
        padding: 30px 20px;
        border-radius: 12px;
        background: rgba(0, 0, 0, 0.3);
        position: relative;
        transition: all 0.3s;
      }

      .podium-card:hover {
        transform: translateY(-5px);
      }

      .podium-card.p1 {
        background: linear-gradient(
          135deg,
          rgba(255, 215, 0, 0.15) 0%,
          rgba(255, 215, 0, 0.05) 100%
        );
        border: 1px solid rgba(255, 215, 0, 0.3);
      }

      .podium-card.p2 {
        background: linear-gradient(
          135deg,
          rgba(192, 192, 192, 0.15) 0%,
          rgba(192, 192, 192, 0.05) 100%
        );
        border: 1px solid rgba(192, 192, 192, 0.3);
      }

      .podium-card.p3 {
        background: linear-gradient(
          135deg,
          rgba(205, 127, 50, 0.15) 0%,
          rgba(205, 127, 50, 0.05) 100%
        );
        border: 1px solid rgba(205, 127, 50, 0.3);
      }

      .podium-position {
        font-size: 2.5rem;
        margin-bottom: 15px;
      }

      .podium-car-number {
        font-size: 1.8rem;
        font-weight: 900;
        color: #e63946;
        font-family: "Orbitron", monospace;
        margin-bottom: 10px;
      }

      .podium-team {
        color: #fff;
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 5px;
      }

      .podium-car {
        color: #888;
        font-size: 0.85rem;
        margin-bottom: 15px;
      }

      .podium-drivers {
        font-size: 0.75rem;
        color: #666;
        margin-bottom: 15px;
        line-height: 1.4;
      }

      .podium-odds {
        background: rgba(230, 57, 70, 0.2);
        color: #e63946;
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 700;
      }

      /* Key Factors */
      .factors-section {
        margin-top: 30px;
        padding-top: 30px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }

      .factors-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 15px;
      }

      .factor-card {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 18px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 10px;
        transition: all 0.3s;
      }

      .factor-card:hover {
        background: rgba(230, 57, 70, 0.08);
      }

      .factor-icon {
        font-size: 1.8rem;
        flex-shrink: 0;
      }

      .factor-info h5 {
        color: #fff;
        font-size: 0.9rem;
        margin-bottom: 3px;
        font-family: "Inter", sans-serif;
        font-weight: 600;
      }

      .factor-info p {
        color: #888;
        font-size: 0.8rem;
      }

      /* Dark Horse */
      .dark-horse-section {
        margin-top: 30px;
        padding: 25px;
        background: linear-gradient(
          135deg,
          rgba(255, 193, 7, 0.1) 0%,
          rgba(255, 193, 7, 0.03) 100%
        );
        border: 1px solid rgba(255, 193, 7, 0.2);
        border-radius: 12px;
      }

      .dark-horse-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 15px;
      }

      .dark-horse-header h4 {
        color: #ffc107;
        font-size: 1rem;
        font-weight: 600;
      }

      .dark-horse-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 15px;
      }

      .dark-horse-team {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .dark-horse-number {
        font-size: 1.5rem;
        font-weight: 900;
        color: #ffc107;
        font-family: "Orbitron", monospace;
      }

      .dark-horse-info h5 {
        color: #fff;
        font-size: 1rem;
        margin-bottom: 3px;
      }

      .dark-horse-info p {
        color: #888;
        font-size: 0.85rem;
      }

      .dark-horse-reason {
        color: #ccc;
        font-size: 0.9rem;
        line-height: 1.5;
        max-width: 400px;
      }

      /* Championship Predictions */
      .championship-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: 30px;
      }

      .championship-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        overflow: hidden;
      }

      .championship-header {
        background: linear-gradient(
          135deg,
          rgba(230, 57, 70, 0.15) 0%,
          rgba(230, 57, 70, 0.05) 100%
        );
        padding: 25px;
      }

      .championship-header h3 {
        color: #fff;
        font-size: 1.2rem;
        font-family: "Orbitron", monospace;
      }

      .championship-body {
        padding: 25px;
      }

      .championship-item {
        display: flex;
        align-items: center;
        padding: 15px;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 10px;
        margin-bottom: 10px;
        transition: all 0.3s;
      }

      .championship-item:hover {
        background: rgba(230, 57, 70, 0.08);
      }

      .championship-position {
        font-size: 1.5rem;
        font-weight: 900;
        color: #e63946;
        font-family: "Orbitron", monospace;
        width: 50px;
      }

      .championship-team-info {
        flex: 1;
      }

      .championship-team-info h4 {
        color: #fff;
        font-size: 0.95rem;
        margin-bottom: 3px;
      }

      .championship-team-info p {
        color: #888;
        font-size: 0.8rem;
      }

      .championship-probability {
        text-align: right;
      }

      .probability-bar {
        width: 100px;
        height: 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        overflow: hidden;
        margin-bottom: 5px;
      }

      .probability-fill {
        height: 100%;
        background: linear-gradient(90deg, #e63946, #ffc107);
        border-radius: 3px;
      }

      .probability-value {
        font-size: 0.85rem;
        color: #e63946;
        font-weight: 700;
      }

      /* Head to Head */
      .h2h-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 20px;
      }

      .h2h-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 12px;
        padding: 25px;
      }

      .h2h-teams {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .h2h-team {
        text-align: center;
      }

      .h2h-team-name {
        color: #fff;
        font-size: 1.1rem;
        font-weight: 700;
        margin-bottom: 5px;
      }

      .h2h-wins {
        font-size: 2rem;
        font-weight: 900;
        color: #e63946;
        font-family: "Orbitron", monospace;
      }

      .h2h-vs {
        color: #666;
        font-size: 1.2rem;
        font-weight: 700;
      }

      .h2h-bar {
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        overflow: hidden;
        display: flex;
        margin-bottom: 15px;
      }

      .h2h-bar-fill {
        height: 100%;
        transition: width 0.5s ease;
      }

      .h2h-bar-fill.team1 {
        background: #e63946;
      }

      .h2h-bar-fill.team2 {
        background: #007bff;
      }

      .h2h-advantage {
        text-align: center;
        padding: 12px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 8px;
      }

      .h2h-advantage-label {
        font-size: 0.7rem;
        color: #888;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 5px;
      }

      .h2h-advantage-team {
        color: #28a745;
        font-weight: 700;
        font-size: 0.9rem;
      }

      .h2h-reason {
        color: #666;
        font-size: 0.8rem;
        margin-top: 5px;
      }

      /* History Grid */
      .history-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
      }

      .history-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 12px;
        overflow: hidden;
        transition: all 0.3s;
      }

      .history-card:hover {
        border-color: rgba(255, 255, 255, 0.2);
      }

      .history-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        background: rgba(0, 0, 0, 0.3);
      }

      .history-race h4 {
        color: #fff;
        font-size: 1rem;
        margin-bottom: 5px;
      }

      .history-race p {
        color: #888;
        font-size: 0.8rem;
      }

      .history-result {
        padding: 6px 14px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 700;
      }

      .history-result.correct {
        background: rgba(40, 167, 69, 0.2);
        color: #28a745;
      }

      .history-result.partial {
        background: rgba(255, 193, 7, 0.2);
        color: #ffc107;
      }

      .history-body {
        padding: 20px;
      }

      .history-comparison {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }

      .comparison-col {
        text-align: center;
      }

      .comparison-label {
        font-size: 0.7rem;
        color: #888;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 10px;
      }

      .comparison-value {
        color: #fff;
        font-weight: 600;
        font-size: 0.9rem;
      }

      /* Methodology */
      .methodology-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        padding: 40px;
      }

      .methodology-header {
        text-align: center;
        margin-bottom: 40px;
      }

      .methodology-header h3 {
        color: #fff;
        font-size: 1.5rem;
        margin-bottom: 10px;
      }

      .methodology-header p {
        color: #888;
        font-size: 1rem;
        max-width: 600px;
        margin: 0 auto;
      }

      .methodology-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
      }

      .methodology-item {
        display: flex;
        align-items: flex-start;
        gap: 15px;
        padding: 20px;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 12px;
      }

      .methodology-icon {
        font-size: 2rem;
        flex-shrink: 0;
      }

      .methodology-content h4 {
        color: #fff;
        font-size: 1rem;
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .methodology-weight {
        background: rgba(230, 57, 70, 0.2);
        color: #e63946;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.75rem;
        font-weight: 700;
      }

      .methodology-content p {
        color: #888;
        font-size: 0.85rem;
        line-height: 1.5;
      }

      /* ================================
         USER PREDICTIONS SECTION
         ================================ */

      /* Top Predictors Leaderboard */
      .leaderboard-section {
        margin-bottom: 50px;
      }

      .leaderboard-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .leaderboard-header h2 {
        font-size: 1.8rem;
        margin-bottom: 10px;
        background: linear-gradient(135deg, #ffd700, #ffaa00);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .leaderboard-header p {
        color: #888;
        font-size: 1rem;
      }

      .leaderboard-podium {
        display: flex;
        justify-content: center;
        align-items: flex-end;
        gap: 20px;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }

      .leaderboard-spot {
        text-align: center;
        padding: 25px 30px;
        border-radius: 20px;
        position: relative;
        transition: all 0.3s ease;
        min-width: 180px;
      }

      .leaderboard-spot:hover {
        transform: translateY(-8px);
      }

      .leaderboard-spot.first {
        background: linear-gradient(
          135deg,
          rgba(255, 215, 0, 0.2) 0%,
          rgba(255, 180, 0, 0.1) 100%
        );
        border: 2px solid rgba(255, 215, 0, 0.5);
        order: 2;
        padding: 35px 40px;
      }

      .leaderboard-spot.second {
        background: linear-gradient(
          135deg,
          rgba(192, 192, 192, 0.2) 0%,
          rgba(150, 150, 150, 0.1) 100%
        );
        border: 2px solid rgba(192, 192, 192, 0.4);
        order: 1;
      }

      .leaderboard-spot.third {
        background: linear-gradient(
          135deg,
          rgba(205, 127, 50, 0.2) 0%,
          rgba(180, 100, 30, 0.1) 100%
        );
        border: 2px solid rgba(205, 127, 50, 0.4);
        order: 3;
      }

      .leaderboard-rank {
        font-size: 2.5rem;
        margin-bottom: 10px;
      }

      .leaderboard-spot.first .leaderboard-rank {
        font-size: 3rem;
      }

      .leaderboard-avatar {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(135deg, #e63946, #c62828);
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 12px;
        font-size: 1.5rem;
        font-weight: 700;
        color: #fff;
        border: 3px solid rgba(255, 255, 255, 0.2);
      }

      .leaderboard-spot.first .leaderboard-avatar {
        width: 80px;
        height: 80px;
        font-size: 2rem;
        border-color: rgba(255, 215, 0, 0.5);
      }

      .leaderboard-name {
        color: #fff;
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 5px;
      }

      .leaderboard-spot.first .leaderboard-name {
        font-size: 1.3rem;
      }

      .leaderboard-stats {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 10px;
      }

      .leaderboard-stat {
        text-align: center;
      }

      .leaderboard-stat-value {
        font-size: 1.2rem;
        font-weight: 700;
        color: #28a745;
        font-family: "Orbitron", monospace;
      }

      .leaderboard-spot.first .leaderboard-stat-value {
        font-size: 1.5rem;
        color: #ffd700;
      }

      .leaderboard-stat-label {
        font-size: 0.65rem;
        color: #888;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .leaderboard-streak {
        margin-top: 10px;
        padding: 5px 12px;
        background: rgba(255, 152, 0, 0.2);
        border-radius: 20px;
        font-size: 0.75rem;
        color: #ff9800;
        display: inline-block;
      }

      /* Submit Prediction Section */
      .submit-prediction-section {
        background: linear-gradient(
          135deg,
          rgba(230, 57, 70, 0.08) 0%,
          rgba(230, 57, 70, 0.02) 100%
        );
        border: 1px solid rgba(230, 57, 70, 0.2);
        border-radius: 24px;
        padding: 40px;
        margin-bottom: 50px;
        position: relative;
        overflow: hidden;
      }

      .submit-prediction-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          #e63946,
          #ffc107,
          #28a745,
          #007bff,
          #e63946
        );
        background-size: 200% 100%;
        animation: gradientMove 3s ease infinite;
      }

      @keyframes gradientMove {
        0%,
        100% {
          background-position: 0% 0%;
        }
        50% {
          background-position: 100% 0%;
        }
      }

      .submit-header {
        text-align: center;
        margin-bottom: 35px;
      }

      .submit-header h2 {
        font-size: 2rem;
        color: #fff;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
      }

      .submit-header p {
        color: #aaa;
        font-size: 1rem;
        max-width: 600px;
        margin: 0 auto;
      }

      .prediction-form {
        max-width: 700px;
        margin: 0 auto;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
      }

      .form-group.full-width {
        grid-column: 1 / -1;
      }

      .form-label {
        font-size: 0.85rem;
        color: #ccc;
        margin-bottom: 8px;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .form-input,
      .form-select {
        padding: 14px 18px;
        background: rgba(0, 0, 0, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        color: #fff;
        font-size: 1rem;
        font-family: "Inter", sans-serif;
        transition: all 0.3s ease;
        appearance: none;
      }

      .form-input:focus,
      .form-select:focus {
        outline: none;
        border-color: #e63946;
        box-shadow: 0 0 0 3px rgba(230, 57, 70, 0.15);
      }

      .form-input::placeholder {
        color: #666;
      }

      .form-select {
        cursor: pointer;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%23888' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 15px center;
        padding-right: 40px;
      }

      .form-select option {
        background: #1a1a1a;
        color: #fff;
        padding: 10px;
      }

      /* Team Selection Grid */
      .team-selection-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 12px;
        max-height: 280px;
        overflow-y: auto;
        padding: 5px;
        margin-top: 10px;
      }

      .team-selection-grid::-webkit-scrollbar {
        width: 6px;
      }

      .team-selection-grid::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 3px;
      }

      .team-selection-grid::-webkit-scrollbar-thumb {
        background: rgba(230, 57, 70, 0.5);
        border-radius: 3px;
      }

      .team-option {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 15px;
        background: rgba(255, 255, 255, 0.03);
        border: 2px solid rgba(255, 255, 255, 0.08);
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .team-option:hover {
        background: rgba(230, 57, 70, 0.1);
        border-color: rgba(230, 57, 70, 0.3);
      }

      .team-option.selected {
        background: rgba(230, 57, 70, 0.15);
        border-color: #e63946;
        box-shadow: 0 0 20px rgba(230, 57, 70, 0.2);
      }

      .team-option input {
        display: none;
      }

      .team-number {
        font-size: 1.3rem;
        font-weight: 900;
        color: #e63946;
        font-family: "Orbitron", monospace;
        min-width: 40px;
      }

      .team-info-select h5 {
        color: #fff;
        font-size: 0.85rem;
        margin-bottom: 2px;
        line-height: 1.2;
      }

      .team-info-select p {
        color: #888;
        font-size: 0.7rem;
      }

      .submit-btn {
        width: 100%;
        padding: 18px;
        background: linear-gradient(135deg, #e63946 0%, #c62828 100%);
        border: none;
        border-radius: 14px;
        color: #fff;
        font-size: 1.1rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        margin-top: 25px;
        position: relative;
        overflow: hidden;
      }

      .submit-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s ease;
      }

      .submit-btn:hover::before {
        left: 100%;
      }

      .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(230, 57, 70, 0.4);
      }

      .submit-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .submit-btn:disabled:hover::before {
        left: -100%;
      }

      .submit-icon {
        font-size: 1.3rem;
      }

      /* Success Message */
      .success-message {
        display: none;
        text-align: center;
        padding: 30px;
        animation: fadeIn 0.5s ease;
      }

      .success-message.show {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .success-icon {
        font-size: 4rem;
        margin-bottom: 15px;
        animation: bounce 0.6s ease;
      }

      @keyframes bounce {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.2);
        }
      }

      .success-message h3 {
        color: #28a745;
        font-size: 1.5rem;
        margin-bottom: 10px;
      }

      .success-message p {
        color: #888;
        margin-bottom: 20px;
      }

      .reset-btn {
        padding: 12px 30px;
        background: transparent;
        border: 2px solid #e63946;
        border-radius: 30px;
        color: #e63946;
        font-size: 0.95rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .reset-btn:hover {
        background: #e63946;
        color: #fff;
      }

      /* Incentive badges */
      .prediction-incentives {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-top: 30px;
        flex-wrap: wrap;
      }

      .incentive-badge {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 20px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 30px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .incentive-icon {
        font-size: 1.5rem;
      }

      .incentive-text {
        color: #ccc;
        font-size: 0.85rem;
      }

      .incentive-text strong {
        color: #fff;
        display: block;
        font-size: 0.9rem;
      }

      /* Loading State */
      .loading-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 60px 20px;
      }

      .loading-spinner {
        width: 50px;
        height: 50px;
        border: 3px solid rgba(255, 255, 255, 0.1);
        border-top-color: #e63946;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .loading-text {
        color: #888;
        margin-top: 20px;
        font-size: 0.9rem;
      }

      /* Tab Content */
      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .accuracy-banner {
          flex-direction: column;
          text-align: center;
          padding: 25px 20px;
        }

        .accuracy-stats {
          width: 100%;
          justify-content: center;
        }

        .podium-grid {
          grid-template-columns: 1fr;
        }

        .prediction-header {
          padding: 20px;
        }

        .prediction-body {
          padding: 20px;
        }

        .championship-grid {
          grid-template-columns: 1fr;
        }

        .dark-horse-content {
          flex-direction: column;
          align-items: flex-start;
        }

        .dark-horse-reason {
          max-width: 100%;
        }

        /* User Predictions Responsive */
        .leaderboard-podium {
          flex-direction: column;
          align-items: center;
        }

        .leaderboard-spot {
          width: 100%;
          max-width: 280px;
        }

        .leaderboard-spot.first,
        .leaderboard-spot.second,
        .leaderboard-spot.third {
          order: unset;
        }

        .submit-prediction-section {
          padding: 25px 20px;
        }

        .form-row {
          grid-template-columns: 1fr;
        }

        .team-selection-grid {
          grid-template-columns: 1fr;
          max-height: 250px;
        }

        .prediction-incentives {
          flex-direction: column;
          align-items: center;
        }

        .incentive-badge {
          width: 100%;
          max-width: 280px;
          justify-content: center;
        }
      }
    </style>
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "name": "Race Predictions | iomotorsport",
        "description": "Data-driven race predictions and analysis for WEC, IMSA, and more.",
        "url": "https://iomotorsport.com/predictions.html",
        "publisher": {
          "@type": "Organization",
          "name": "iomotorsport"
        },
        "breadcrumb": {
          "@type": "BreadcrumbList",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Home",
              "item": "https://iomotorsport.com/"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "Predictions",
              "item": "https://iomotorsport.com/predictions.html"
            }
          ]
        }
      }
    </script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-SLERGKLNWP"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-SLERGKLNWP");
    </script>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2456627863532019"
      crossorigin="anonymous"
    ></script>
    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  </head>
  <body>
    <!-- Navigation -->
    <header>
      <div class="container">
        <div class="header-content">
          <a href="index.html" class="logo">
            <div class="logo-icon">üèéÔ∏è</div>
            io<span>motorsport</span>
          </a>
          <nav>
            <ul class="nav-links">
              <li><a href="index.html">Home</a></li>
              <li><a href="endurance.html">Endurance</a></li>
              <li><a href="esports.html">Esports</a></li>
              <li><a href="predictions.html" class="active">Predictions</a></li>
              <li><a href="hub.html" class="nav-cta">Hub</a></li>
            </ul>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
              ‚ò∞
            </button>
          </nav>
        </div>
        <div class="mobile-nav" id="mobileNav">
          <a href="index.html">Home</a>
          <a href="endurance.html">Endurance</a>
          <a href="esports.html">Esports</a>
          <a href="predictions.html" class="active">Predictions</a>
          <a href="hub.html">Hub</a>
        </div>
      </div>
    </header>

    <main>
      <!-- Page Hero -->
      <section class="page-hero">
        <div class="container">
          <span class="section-tag">üìä Analytics</span>
          <h1>Race <span class="gradient-text">Predictions</span></h1>
          <p>
            Data-driven predictions for WEC, IMSA, GT World Challenge & Offroad
            Endurance. All races in chronological order with 85% winner
            accuracy.
          </p>
        </div>
      </section>

      <!-- Main Content -->
      <section class="section" style="padding-top: 40px">
        <div class="container">
          <!-- Top Predictors Leaderboard -->
          <div class="leaderboard-section" id="leaderboardSection">
            <div class="leaderboard-header">
              <h2>üèÜ Top Predictors</h2>
              <p>
                Community members with the best prediction accuracy this season
              </p>
            </div>
            <div class="leaderboard-podium" id="leaderboardPodium">
              <!-- Second Place -->
              <div class="leaderboard-spot second">
                <div class="leaderboard-rank">ü•à</div>
                <div class="leaderboard-avatar">MR</div>
                <div class="leaderboard-name">Max_Racer</div>
                <div class="leaderboard-stats">
                  <div class="leaderboard-stat">
                    <div class="leaderboard-stat-value">78%</div>
                    <div class="leaderboard-stat-label">Accuracy</div>
                  </div>
                  <div class="leaderboard-stat">
                    <div class="leaderboard-stat-value">18</div>
                    <div class="leaderboard-stat-label">Correct</div>
                  </div>
                </div>
                <div class="leaderboard-streak">üî• 5 race streak</div>
              </div>

              <!-- First Place -->
              <div class="leaderboard-spot first">
                <div class="leaderboard-rank">üëë</div>
                <div class="leaderboard-avatar">JT</div>
                <div class="leaderboard-name">JT_Endurance</div>
                <div class="leaderboard-stats">
                  <div class="leaderboard-stat">
                    <div class="leaderboard-stat-value">82%</div>
                    <div class="leaderboard-stat-label">Accuracy</div>
                  </div>
                  <div class="leaderboard-stat">
                    <div class="leaderboard-stat-value">23</div>
                    <div class="leaderboard-stat-label">Correct</div>
                  </div>
                </div>
                <div class="leaderboard-streak">üî• 8 race streak</div>
              </div>

              <!-- Third Place -->
              <div class="leaderboard-spot third">
                <div class="leaderboard-rank">ü•â</div>
                <div class="leaderboard-avatar">SP</div>
                <div class="leaderboard-name">SpeedyPablo</div>
                <div class="leaderboard-stats">
                  <div class="leaderboard-stat">
                    <div class="leaderboard-stat-value">75%</div>
                    <div class="leaderboard-stat-label">Accuracy</div>
                  </div>
                  <div class="leaderboard-stat">
                    <div class="leaderboard-stat-value">15</div>
                    <div class="leaderboard-stat-label">Correct</div>
                  </div>
                </div>
                <div class="leaderboard-streak">üî• 3 race streak</div>
              </div>
            </div>
          </div>

          <!-- Submit Your Prediction -->
          <div class="submit-prediction-section" id="submitPredictionSection">
            <div class="submit-header">
              <h2>üéØ Make Your Prediction</h2>
              <p>
                Think you know who's going to win? Submit your prediction and
                compete with the community for the top spot on our leaderboard!
              </p>
            </div>

            <form class="prediction-form" id="predictionForm">
              <div class="form-row">
                <div class="form-group">
                  <label class="form-label">üë§ Your Name / Username</label>
                  <input
                    type="text"
                    class="form-input"
                    id="userName"
                    name="user_name"
                    placeholder="Enter your name"
                    required
                  />
                </div>
                <div class="form-group">
                  <label class="form-label">üìß Email Address</label>
                  <input
                    type="email"
                    class="form-input"
                    id="userEmail"
                    name="user_email"
                    placeholder="your@email.com"
                    required
                  />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group full-width">
                  <label class="form-label">üèÅ Select Race</label>
                  <select
                    class="form-select"
                    id="raceSelect"
                    name="race_name"
                    required
                  >
                    <option value="">Choose an upcoming race...</option>
                  </select>
                </div>
              </div>

              <div class="form-group full-width">
                <label class="form-label">üèéÔ∏è Pick Your Winner</label>
                <div class="team-selection-grid" id="teamSelectionGrid">
                  <p style="color: #888; text-align: center; grid-column: 1/-1">
                    Select a race first to see available teams
                  </p>
                </div>
                <input
                  type="hidden"
                  id="selectedTeam"
                  name="selected_team"
                  required
                />
              </div>

              <button type="submit" class="submit-btn" id="submitBtn">
                <span class="submit-icon">üöÄ</span>
                Submit Prediction
              </button>
            </form>

            <div class="success-message" id="successMessage">
              <div class="success-icon">üéâ</div>
              <h3>Prediction Submitted!</h3>
              <p>
                Good luck! We'll track your prediction and update the
                leaderboard after the race.
              </p>
              <button class="reset-btn" onclick="resetPredictionForm()">
                Make Another Prediction
              </button>
            </div>

            <div class="prediction-incentives">
              <div class="incentive-badge">
                <span class="incentive-icon">üèÜ</span>
                <div class="incentive-text">
                  <strong>Climb the Leaderboard</strong>
                  Compete for the #1 spot
                </div>
              </div>
              <div class="incentive-badge">
                <span class="incentive-icon">üî•</span>
                <div class="incentive-text">
                  <strong>Build Your Streak</strong>
                  Consecutive correct picks
                </div>
              </div>
              <div class="incentive-badge">
                <span class="incentive-icon">üìä</span>
                <div class="incentive-text">
                  <strong>Track Your Stats</strong>
                  See your accuracy grow
                </div>
              </div>
            </div>
          </div>

          <!-- Accuracy Banner -->
          <div class="accuracy-banner" id="accuracyBanner">
            <div class="accuracy-info">
              <h3>Our Prediction Track Record</h3>
              <p>Based on predictions from the 2024-2026 seasons</p>
            </div>
            <div class="accuracy-stats">
              <div class="accuracy-stat">
                <span class="accuracy-value" id="winnerAccuracy">85%</span>
                <span class="accuracy-label">Winner Accuracy</span>
              </div>
              <div class="accuracy-stat">
                <span class="accuracy-value" id="podiumAccuracy">72%</span>
                <span class="accuracy-label">Full Podium</span>
              </div>
              <div class="accuracy-stat">
                <span class="accuracy-value" id="totalRaces">32</span>
                <span class="accuracy-label">Races Predicted</span>
              </div>
            </div>
          </div>

          <!-- Navigation Tabs -->
          <div class="predictions-nav">
            <button class="active" onclick="showTab('upcoming')">
              üéØ Upcoming Predictions
            </button>
            <button onclick="showTab('championship')">üèÜ Championship</button>
            <button onclick="showTab('h2h')">‚öîÔ∏è Head to Head</button>
            <button onclick="showTab('history')">üìú Past Results</button>
            <button onclick="showTab('methodology')">üî¨ Methodology</button>
          </div>

          <!-- Tab Contents -->

          <!-- Upcoming Predictions -->
          <div id="upcoming" class="tab-content active">
            <!-- Series Filter -->
            <div class="series-filter" id="seriesFilter">
              <button
                class="active"
                data-series="all"
                onclick="filterBySeries('all')"
              >
                üèÅ All Series
              </button>
              <button data-series="wec" onclick="filterBySeries('wec')">
                üåç WEC
              </button>
              <button data-series="imsa" onclick="filterBySeries('imsa')">
                üá∫üá∏ IMSA
              </button>
              <button data-series="gtwc" onclick="filterBySeries('gtwc')">
                üèÜ GTWC
              </button>
              <button data-series="offroad" onclick="filterBySeries('offroad')">
                üèúÔ∏è Offroad
              </button>
            </div>
            <div id="upcomingPredictions">
              <div class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading predictions...</p>
              </div>
            </div>
          </div>

          <!-- Championship Predictions -->
          <div id="championship" class="tab-content">
            <div class="section-header" style="margin-bottom: 30px">
              <h2>Championship Predictions</h2>
              <p>Our projections for the 2026 season championships</p>
            </div>
            <div class="championship-grid" id="championshipPredictions">
              <div class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading championship data...</p>
              </div>
            </div>
          </div>

          <!-- Head to Head -->
          <div id="h2h" class="tab-content">
            <div class="section-header" style="margin-bottom: 30px">
              <h2>Head to Head Records</h2>
              <p>
                How the top manufacturers compare when they go wheel-to-wheel
              </p>
            </div>
            <div class="h2h-grid" id="h2hGrid">
              <div class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading head-to-head data...</p>
              </div>
            </div>
          </div>

          <!-- History -->
          <div id="history" class="tab-content">
            <div class="section-header" style="margin-bottom: 30px">
              <h2>Recent Prediction Results</h2>
              <p>How our predictions performed in recent races</p>
            </div>
            <div class="history-grid" id="historyGrid">
              <div class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading history...</p>
              </div>
            </div>
          </div>

          <!-- Methodology -->
          <div id="methodology" class="tab-content">
            <div class="methodology-card" id="methodologyCard">
              <div class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading methodology...</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- CTA Section -->
      <section class="section cta-section">
        <div class="container">
          <div class="cta-card">
            <h2>Explore More Content</h2>
            <p>
              Dive into our blog for in-depth analysis, driver profiles, and
              race insights.
            </p>
            <div class="cta-buttons">
              <a href="hub.html" class="btn btn-primary">Read Blog</a>
              <a href="endurance.html" class="btn btn-secondary"
                >View Race Calendar</a
              >
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="footer-grid">
          <div class="footer-brand">
            <a href="index.html" class="logo">
              <div class="logo-icon">üèéÔ∏è</div>
              io<span>motorsport</span>
            </a>
            <p>
              Your complete motorsport experience. Racing coverage, esports,
              predictions, and analysis.
            </p>
            <div class="social-links">
              <a href="#" class="social-link">ùïè</a>
              <a href="#" class="social-link">üì∏</a>
              <a href="#" class="social-link">‚ñ∂Ô∏è</a>
            </div>
          </div>

          <div class="footer-links">
            <h4>Racing</h4>
            <a href="endurance.html">Endurance</a>
            <a href="endurance.html#calendar">Calendar</a>
            <a href="endurance.html#entries">Entry Lists</a>
            <a href="predictions.html">Predictions</a>
          </div>

          <div class="footer-links">
            <h4>Content</h4>
            <a href="hub.html">Blog</a>
            <a href="esports.html">Esports Team</a>
          </div>

          <div class="footer-links">
            <h4>More</h4>
            <a href="about.html">About Us</a>
            <a href="contact.html">Contact</a>
            <a href="privacy-policy.html">Privacy Policy</a>
          </div>
        </div>

        <div class="footer-bottom">
          <p>&copy; 2026 iomotorsport. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <script>
      // Global data store
      let predictionsData = null;

      // Tab navigation
      function showTab(tabId) {
        // Hide all tabs
        document.querySelectorAll(".tab-content").forEach((tab) => {
          tab.classList.remove("active");
        });
        // Remove active class from buttons
        document.querySelectorAll(".predictions-nav button").forEach((btn) => {
          btn.classList.remove("active");
        });
        // Show selected tab
        document.getElementById(tabId).classList.add("active");
        // Add active class to clicked button
        event.target.classList.add("active");
      }

      // Mobile menu toggle
      function toggleMobileMenu() {
        document.getElementById("mobileNav").classList.toggle("active");
      }

      // Current filter state
      let currentSeriesFilter = "all";

      // Filter by series
      function filterBySeries(seriesId) {
        currentSeriesFilter = seriesId;

        // Update button states
        document.querySelectorAll(".series-filter button").forEach((btn) => {
          btn.classList.remove("active");
          if (btn.dataset.series === seriesId) {
            btn.classList.add("active");
          }
        });

        // Re-render with filter
        if (predictionsData && predictionsData.upcomingPredictions) {
          renderUpcomingPredictions(predictionsData.upcomingPredictions);
        }
      }

      // Format date
      function formatDate(dateString) {
        const options = { year: "numeric", month: "long", day: "numeric" };
        return new Date(dateString).toLocaleDateString("en-US", options);
      }

      // Format short date
      function formatShortDate(dateString) {
        const options = { month: "short", year: "numeric" };
        return new Date(dateString).toLocaleDateString("en-US", options);
      }

      // Render upcoming predictions
      function renderUpcomingPredictions(predictions) {
        const container = document.getElementById("upcomingPredictions");

        if (!predictions || predictions.length === 0) {
          container.innerHTML =
            '<p style="color: #888; text-align: center;">No upcoming predictions available.</p>';
          return;
        }

        // Filter by series if needed
        let filtered = predictions;
        if (currentSeriesFilter !== "all") {
          filtered = predictions.filter(
            (p) => p.seriesId === currentSeriesFilter,
          );
        }

        if (filtered.length === 0) {
          container.innerHTML =
            '<p style="color: #888; text-align: center;">No predictions for this series yet.</p>';
          return;
        }

        // Sort chronologically by date (featured races first within each month)
        const sorted = [...filtered].sort((a, b) => {
          return new Date(a.date) - new Date(b.date);
        });

        container.innerHTML = sorted
          .map(
            (pred) => `
          <div class="prediction-card ${pred.isFeatured ? "featured" : ""}" data-series="${pred.seriesId}">
            <div class="prediction-header">
              ${pred.isFeatured ? '<span class="featured-badge">Featured Race</span>' : ""}
              <div class="prediction-race">
                <h3>${pred.raceName} <span class="series-badge ${pred.seriesId}">${pred.series}</span></h3>
                <div class="prediction-meta">
                  <span>üìÖ ${formatDate(pred.date)}${pred.endDate ? " - " + formatDate(pred.endDate).split(",")[0] : ""}</span>
                  <span>üìç ${pred.location}</span>
                  <span>üèÅ Round ${pred.round}</span>
                </div>
              </div>
              <div class="prediction-confidence">
                <span class="confidence-label">Model Confidence</span>
                <div class="confidence-bar">
                  <div class="confidence-fill" style="width: ${pred.confidence}%"></div>
                </div>
                <span class="confidence-value">${pred.confidence}% Confidence</span>
              </div>
            </div>
            <div class="prediction-body">
              ${pred.analysis?.summary ? `<div class="prediction-summary">${pred.analysis.summary}</div>` : ""}
              
              <h4 class="podium-section-title">üèÜ Podium Prediction</h4>
              <div class="podium-grid">
                ${pred.podiumPrediction
                  .map(
                    (p, i) => `
                  <div class="podium-card p${i + 1}">
                    <span class="podium-position">${i === 0 ? "ü•á" : i === 1 ? "ü•à" : "ü•â"}</span>
                    <div class="podium-car-number">${p.carNumber}</div>
                    <div class="podium-team">${p.team}</div>
                    <div class="podium-car">${p.car}</div>
                    ${p.drivers ? `<div class="podium-drivers">${p.drivers.join(" ‚Ä¢ ")}</div>` : ""}
                    <span class="podium-odds">${p.winProbability}% Win Probability</span>
                  </div>
                `,
                  )
                  .join("")}
              </div>

              ${
                pred.analysis?.keyFactors
                  ? `
                <div class="factors-section">
                  <h4 class="podium-section-title">üîç Key Prediction Factors</h4>
                  <div class="factors-grid">
                    ${pred.analysis.keyFactors
                      .map(
                        (f) => `
                      <div class="factor-card">
                        <span class="factor-icon">${f.icon}</span>
                        <div class="factor-info">
                          <h5>${f.title}</h5>
                          <p>${f.description}</p>
                        </div>
                      </div>
                    `,
                      )
                      .join("")}
                  </div>
                </div>
              `
                  : ""
              }

              ${
                pred.darkHorse
                  ? `
                <div class="dark-horse-section">
                  <div class="dark-horse-header">
                    <span style="font-size: 1.5rem;">üê¥</span>
                    <h4>Dark Horse Pick</h4>
                  </div>
                  <div class="dark-horse-content">
                    <div class="dark-horse-team">
                      <span class="dark-horse-number">${pred.darkHorse.carNumber}</span>
                      <div class="dark-horse-info">
                        <h5>${pred.darkHorse.team}</h5>
                        <p>${pred.darkHorse.car}</p>
                      </div>
                    </div>
                    <p class="dark-horse-reason">${pred.darkHorse.reason}</p>
                  </div>
                </div>
              `
                  : ""
              }
            </div>
          </div>
        `,
          )
          .join("");
      }

      // Render championship predictions
      function renderChampionshipPredictions(championships) {
        const container = document.getElementById("championshipPredictions");

        if (!championships) {
          container.innerHTML =
            '<p style="color: #888; text-align: center;">No championship data available.</p>';
          return;
        }

        const champs = Object.values(championships);

        container.innerHTML = champs
          .map(
            (champ) => `
          <div class="championship-card">
            <div class="championship-header">
              <h3>${champ.title}</h3>
            </div>
            <div class="championship-body">
              ${champ.predictions
                .map(
                  (p) => `
                <div class="championship-item">
                  <span class="championship-position">${p.position}</span>
                  <div class="championship-team-info">
                    <h4>${p.team}</h4>
                    <p>${p.car}</p>
                  </div>
                  <div class="championship-probability">
                    <div class="probability-bar">
                      <div class="probability-fill" style="width: ${p.probability}%"></div>
                    </div>
                    <span class="probability-value">${p.probability}%</span>
                  </div>
                </div>
              `,
                )
                .join("")}
            </div>
          </div>
        `,
          )
          .join("");
      }

      // Render head to head
      function renderH2H(h2hData) {
        const container = document.getElementById("h2hGrid");

        if (!h2hData || h2hData.length === 0) {
          container.innerHTML =
            '<p style="color: #888; text-align: center;">No head-to-head data available.</p>';
          return;
        }

        container.innerHTML = h2hData
          .map((h2h) => {
            const team1Pct = (h2h.team1Wins / h2h.totalRaces) * 100;
            const team2Pct = (h2h.team2Wins / h2h.totalRaces) * 100;

            return `
              <div class="h2h-card">
                <div class="h2h-teams">
                  <div class="h2h-team">
                    <div class="h2h-team-name">${h2h.team1}</div>
                    <div class="h2h-wins">${h2h.team1Wins}</div>
                  </div>
                  <div class="h2h-vs">VS</div>
                  <div class="h2h-team">
                    <div class="h2h-team-name">${h2h.team2}</div>
                    <div class="h2h-wins">${h2h.team2Wins}</div>
                  </div>
                </div>
                <div class="h2h-bar">
                  <div class="h2h-bar-fill team1" style="width: ${team1Pct}%"></div>
                  <div class="h2h-bar-fill team2" style="width: ${team2Pct}%"></div>
                </div>
                <div class="h2h-advantage">
                  <div class="h2h-advantage-label">Current Advantage</div>
                  <div class="h2h-advantage-team">${h2h.currentAdvantage}</div>
                  <div class="h2h-reason">${h2h.reason}</div>
                </div>
              </div>
            `;
          })
          .join("");
      }

      // Render history
      function renderHistory(pastPredictions) {
        const container = document.getElementById("historyGrid");

        if (!pastPredictions || pastPredictions.length === 0) {
          container.innerHTML =
            '<p style="color: #888; text-align: center;">No past predictions available.</p>';
          return;
        }

        container.innerHTML = pastPredictions
          .map(
            (pred) => `
          <div class="history-card">
            <div class="history-header">
              <div class="history-race">
                <h4>${pred.raceName}</h4>
                <p>${pred.series} ‚Ä¢ ${formatShortDate(pred.date)}</p>
              </div>
              <span class="history-result ${pred.result}">${pred.result === "correct" ? "‚úì Correct" : "~ Partial"}</span>
            </div>
            <div class="history-body">
              <div class="history-comparison">
                <div class="comparison-col">
                  <span class="comparison-label">Predicted Winner</span>
                  <span class="comparison-value">${pred.predictedWinner.carNumber} ${pred.predictedWinner.team}</span>
                </div>
                <div class="comparison-col">
                  <span class="comparison-label">Actual Winner</span>
                  <span class="comparison-value">${pred.actualWinner.carNumber} ${pred.actualWinner.team} ${pred.result === "correct" ? "‚úì" : ""}</span>
                </div>
              </div>
            </div>
          </div>
        `,
          )
          .join("");
      }

      // Render methodology
      function renderMethodology(methodology) {
        const container = document.getElementById("methodologyCard");

        if (!methodology) {
          container.innerHTML =
            '<p style="color: #888; text-align: center;">No methodology data available.</p>';
          return;
        }

        container.innerHTML = `
          <div class="methodology-header">
            <h3>${methodology.title}</h3>
            <p>${methodology.description}</p>
          </div>
          <div class="methodology-grid">
            ${methodology.factors
              .map(
                (f) => `
              <div class="methodology-item">
                <span class="methodology-icon">${f.icon}</span>
                <div class="methodology-content">
                  <h4>${f.name} <span class="methodology-weight">${f.weight}%</span></h4>
                  <p>${f.description}</p>
                </div>
              </div>
            `,
              )
              .join("")}
          </div>
        `;
      }

      // Update stats banner
      function updateStats(stats) {
        if (stats) {
          document.getElementById("winnerAccuracy").textContent =
            stats.winnerAccuracy + "%";
          document.getElementById("podiumAccuracy").textContent =
            stats.podiumAccuracy + "%";
          document.getElementById("totalRaces").textContent =
            stats.totalRacesPredicted;
        }
      }

      // ================================
      // USER PREDICTION SUBMISSION
      // ================================

      // Initialize EmailJS - Replace with your actual public key
      // You'll need to create an account at emailjs.com and get your credentials
      const EMAILJS_PUBLIC_KEY = "YOUR_PUBLIC_KEY"; // Replace this
      const EMAILJS_SERVICE_ID = "YOUR_SERVICE_ID"; // Replace this
      const EMAILJS_TEMPLATE_ID = "YOUR_TEMPLATE_ID"; // Replace this

      // Initialize EmailJS when available
      if (typeof emailjs !== "undefined") {
        emailjs.init(EMAILJS_PUBLIC_KEY);
      }

      // Populate race dropdown
      function populateRaceSelect() {
        const raceSelect = document.getElementById("raceSelect");
        if (!predictionsData || !predictionsData.upcomingPredictions) return;

        // Sort by date
        const sortedRaces = [...predictionsData.upcomingPredictions].sort(
          (a, b) => new Date(a.date) - new Date(b.date),
        );

        raceSelect.innerHTML =
          '<option value="">Choose an upcoming race...</option>';

        sortedRaces.forEach((race) => {
          const option = document.createElement("option");
          option.value = race.id;
          option.textContent = `${race.series} - ${race.raceName} (${formatDate(race.date)})`;
          option.dataset.raceData = JSON.stringify(race);
          raceSelect.appendChild(option);
        });
      }

      // Handle race selection
      document
        .getElementById("raceSelect")
        .addEventListener("change", function (e) {
          const selectedOption = e.target.options[e.target.selectedIndex];
          const teamGrid = document.getElementById("teamSelectionGrid");
          const selectedTeamInput = document.getElementById("selectedTeam");

          // Reset selection
          selectedTeamInput.value = "";

          if (!selectedOption.value) {
            teamGrid.innerHTML =
              '<p style="color: #888; text-align: center; grid-column: 1/-1;">Select a race first to see available teams</p>';
            return;
          }

          const raceData = JSON.parse(selectedOption.dataset.raceData);

          // Get teams from the podium prediction plus some extra contenders
          const teams = raceData.podiumPrediction || [];

          // Add dark horse if available
          if (raceData.darkHorse) {
            teams.push({
              carNumber: raceData.darkHorse.carNumber,
              team: raceData.darkHorse.team,
              car: raceData.darkHorse.car,
              winProbability: 10,
            });
          }

          // Add some additional competitive teams based on series
          const additionalTeams = getAdditionalTeams(raceData.seriesId);
          const allTeams = [...teams, ...additionalTeams];

          // Remove duplicates based on car number
          const uniqueTeams = allTeams.filter(
            (team, index, self) =>
              index === self.findIndex((t) => t.carNumber === team.carNumber),
          );

          teamGrid.innerHTML = uniqueTeams
            .map(
              (team) => `
          <label class="team-option" data-team='${JSON.stringify(team)}'>
            <input type="radio" name="team_selection" value="${team.carNumber} - ${team.team}">
            <span class="team-number">${team.carNumber}</span>
            <div class="team-info-select">
              <h5>${team.team}</h5>
              <p>${team.car}</p>
            </div>
          </label>
        `,
            )
            .join("");

          // Add click handlers
          teamGrid.querySelectorAll(".team-option").forEach((option) => {
            option.addEventListener("click", function () {
              // Remove selected class from all
              teamGrid
                .querySelectorAll(".team-option")
                .forEach((o) => o.classList.remove("selected"));
              // Add to clicked
              this.classList.add("selected");
              // Update hidden input
              const teamData = JSON.parse(this.dataset.team);
              selectedTeamInput.value = `${teamData.carNumber} - ${teamData.team} (${teamData.car})`;
            });
          });
        });

      // Get additional teams for each series
      function getAdditionalTeams(seriesId) {
        const teamsBySeries = {
          imsa: [
            {
              carNumber: "#6",
              team: "Porsche Penske Motorsport",
              car: "Porsche 963",
            },
            {
              carNumber: "#31",
              team: "Whelen Cadillac Racing",
              car: "Cadillac V-Series.R",
            },
            {
              carNumber: "#40",
              team: "Wayne Taylor Racing",
              car: "Cadillac V-Series.R",
            },
            {
              carNumber: "#24",
              team: "BMW M Team RLL",
              car: "BMW M Hybrid V8",
            },
            {
              carNumber: "#25",
              team: "BMW M Team RLL",
              car: "BMW M Hybrid V8",
            },
          ],
          wec: [
            {
              carNumber: "#8",
              team: "Toyota Gazoo Racing",
              car: "Toyota GR010 Hybrid",
            },
            { carNumber: "#51", team: "Ferrari AF Corse", car: "Ferrari 499P" },
            {
              carNumber: "#5",
              team: "Porsche Penske Motorsport",
              car: "Porsche 963",
            },
            {
              carNumber: "#93",
              team: "Peugeot TotalEnergies",
              car: "Peugeot 9X8",
            },
            {
              carNumber: "#94",
              team: "Peugeot TotalEnergies",
              car: "Peugeot 9X8",
            },
            { carNumber: "#38", team: "Hertz Team Jota", car: "Porsche 963" },
          ],
          gtwc: [
            { carNumber: "#32", team: "Team WRT", car: "BMW M4 GT3" },
            { carNumber: "#46", team: "Team WRT", car: "BMW M4 GT3" },
            { carNumber: "#51", team: "Iron Lynx", car: "Ferrari 296 GT3" },
            {
              carNumber: "#63",
              team: "Lamborghini Iron Lynx",
              car: "Lamborghini Hurac√°n GT3",
            },
          ],
          offroad: [
            {
              carNumber: "#200",
              team: "Red Bull Off-Road Team",
              car: "Toyota Hilux",
            },
            {
              carNumber: "#201",
              team: "Overdrive Racing",
              car: "Toyota Hilux",
            },
            {
              carNumber: "#211",
              team: "Monster Energy Honda",
              car: "Honda CRF450 Rally",
            },
          ],
        };

        return teamsBySeries[seriesId] || [];
      }

      // Handle form submission
      document
        .getElementById("predictionForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const submitBtn = document.getElementById("submitBtn");
          const form = document.getElementById("predictionForm");
          const successMessage = document.getElementById("successMessage");
          const selectedTeam = document.getElementById("selectedTeam").value;

          // Validate team selection
          if (!selectedTeam) {
            alert("Please select a team to win!");
            return;
          }

          // Disable button and show loading
          submitBtn.disabled = true;
          submitBtn.innerHTML =
            '<span class="submit-icon">‚è≥</span> Submitting...';

          // Get form data
          const formData = {
            user_name: document.getElementById("userName").value,
            user_email: document.getElementById("userEmail").value,
            race_name:
              document.getElementById("raceSelect").options[
                document.getElementById("raceSelect").selectedIndex
              ].textContent,
            selected_team: selectedTeam,
            submission_date: new Date().toISOString(),
          };

          try {
            // Check if EmailJS is configured
            if (
              EMAILJS_PUBLIC_KEY !== "YOUR_PUBLIC_KEY" &&
              typeof emailjs !== "undefined"
            ) {
              // Send via EmailJS
              await emailjs.send(
                EMAILJS_SERVICE_ID,
                EMAILJS_TEMPLATE_ID,
                formData,
              );
            } else {
              // Fallback: Log to console (for demo purposes)
              console.log("Prediction submitted:", formData);
              // Simulate network delay
              await new Promise((resolve) => setTimeout(resolve, 1000));
            }

            // Show success
            form.style.display = "none";
            successMessage.classList.add("show");

            // Save to localStorage for persistence
            savePredictionLocally(formData);
          } catch (error) {
            console.error("Error submitting prediction:", error);
            alert(
              "There was an error submitting your prediction. Please try again.",
            );
            submitBtn.disabled = false;
            submitBtn.innerHTML =
              '<span class="submit-icon">üöÄ</span> Submit Prediction';
          }
        });

      // Save prediction to localStorage
      function savePredictionLocally(prediction) {
        const savedPredictions = JSON.parse(
          localStorage.getItem("userPredictions") || "[]",
        );
        savedPredictions.push(prediction);
        localStorage.setItem(
          "userPredictions",
          JSON.stringify(savedPredictions),
        );
      }

      // Reset form for another prediction
      function resetPredictionForm() {
        const form = document.getElementById("predictionForm");
        const successMessage = document.getElementById("successMessage");
        const submitBtn = document.getElementById("submitBtn");
        const teamGrid = document.getElementById("teamSelectionGrid");

        // Reset form
        form.reset();
        document.getElementById("selectedTeam").value = "";
        teamGrid.innerHTML =
          '<p style="color: #888; text-align: center; grid-column: 1/-1;">Select a race first to see available teams</p>';

        // Show form again
        successMessage.classList.remove("show");
        form.style.display = "block";
        submitBtn.disabled = false;
        submitBtn.innerHTML =
          '<span class="submit-icon">üöÄ</span> Submit Prediction';
      }

      // Load data
      async function loadPredictionsData() {
        try {
          const response = await fetch("data/predictions.json");
          if (!response.ok) throw new Error("Failed to load predictions data");

          predictionsData = await response.json();

          // Update all sections
          updateStats(predictionsData.stats);
          renderUpcomingPredictions(predictionsData.upcomingPredictions);
          renderChampionshipPredictions(
            predictionsData.championshipPredictions,
          );
          renderH2H(predictionsData.headToHead);
          renderHistory(predictionsData.pastPredictions);
          renderMethodology(predictionsData.methodology);

          // Populate race select for user predictions
          populateRaceSelect();
        } catch (error) {
          console.error("Error loading predictions:", error);
          document.getElementById("upcomingPredictions").innerHTML = `
            <p style="color: #e63946; text-align: center;">
              Failed to load predictions. Please try refreshing the page.
            </p>
          `;
        }
      }

      // Initialize on page load
      document.addEventListener("DOMContentLoaded", loadPredictionsData);
    </script>
  </body>
</html>
