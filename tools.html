<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Racing Tools & Calculators | Pit Stop Strategy & Race Prediction
    </title>
    <meta
      name="description"
      content="Professional endurance racing tools: pit stop calculator, race prediction simulator, fuel strategy planner, and live pit dashboard."
    />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary: #e63946;
        --secondary: #1d3557;
        --accent: #f77f00;
        --success: #06d6a0;
        --dark: #0a0e27;
        --light: #f8f9fa;
        --text: #2b2d42;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        line-height: 1.6;
        color: var(--text);
        background: var(--light);
      }

      /* Navigation */
      nav {
        position: fixed;
        top: 0;
        width: 100%;
        background: rgba(10, 14, 39, 0.95);
        backdrop-filter: blur(10px);
        z-index: 1000;
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
      }

      .nav-container {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 2rem;
      }

      .logo {
        font-size: 1.5rem;
        font-weight: 800;
        color: var(--primary);
        text-decoration: none;
      }

      .nav-links {
        display: flex;
        gap: 2rem;
        list-style: none;
      }

      .nav-links a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s ease;
      }

      .nav-links a:hover {
        color: var(--primary);
      }

      /* Header */
      .page-header {
        background: linear-gradient(
          135deg,
          var(--secondary) 0%,
          var(--dark) 100%
        );
        color: white;
        padding: 8rem 2rem 4rem;
        text-align: center;
        margin-top: 70px;
      }

      .page-header h1 {
        font-size: clamp(2.5rem, 6vw, 4rem);
        font-weight: 900;
        margin-bottom: 1rem;
      }

      .page-header p {
        font-size: 1.2rem;
        opacity: 0.9;
        max-width: 700px;
        margin: 0 auto;
      }

      /* Tools Grid */
      .tools-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 3rem 2rem;
      }

      .tool-tabs {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
        justify-content: center;
      }

      .tab-btn {
        padding: 1rem 2rem;
        background: white;
        border: 2px solid var(--light);
        border-radius: 12px;
        cursor: pointer;
        font-weight: 600;
        font-size: 1rem;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .tab-btn:hover {
        border-color: var(--primary);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .tab-btn.active {
        background: var(--primary);
        border-color: var(--primary);
        color: white;
      }

      .tool-section {
        display: none;
        animation: fadeIn 0.5s ease;
      }

      .tool-section.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Tool Cards */
      .tool-card {
        background: white;
        border-radius: 16px;
        padding: 2rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        margin-bottom: 2rem;
      }

      .tool-card h2 {
        font-size: 1.8rem;
        color: var(--secondary);
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .input-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .input-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .input-group label {
        font-weight: 600;
        color: var(--secondary);
        font-size: 0.9rem;
      }

      .input-group input,
      .input-group select {
        padding: 0.8rem;
        border: 2px solid var(--light);
        border-radius: 8px;
        font-size: 1rem;
        transition: border-color 0.3s ease;
      }

      .input-group input:focus,
      .input-group select:focus {
        outline: none;
        border-color: var(--primary);
      }

      .btn-primary {
        background: var(--primary);
        color: white;
        padding: 1rem 2rem;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn-primary:hover {
        background: #d62839;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(230, 57, 70, 0.3);
      }

      /* Results Display */
      .results-panel {
        background: linear-gradient(
          135deg,
          var(--secondary) 0%,
          var(--dark) 100%
        );
        color: white;
        padding: 2rem;
        border-radius: 12px;
        margin-top: 2rem;
      }

      .results-panel h3 {
        font-size: 1.5rem;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
      }

      .result-item {
        background: rgba(255, 255, 255, 0.1);
        padding: 1.5rem;
        border-radius: 8px;
        backdrop-filter: blur(10px);
      }

      .result-label {
        font-size: 0.9rem;
        opacity: 0.8;
        margin-bottom: 0.5rem;
      }

      .result-value {
        font-size: 2rem;
        font-weight: 900;
        color: var(--accent);
      }

      /* Dashboard */
      .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
      }

      .dashboard-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        border-left: 4px solid var(--primary);
      }

      .dashboard-card h3 {
        color: var(--secondary);
        margin-bottom: 1rem;
        font-size: 1.2rem;
      }

      .stat-row {
        display: flex;
        justify-content: space-between;
        padding: 0.8rem 0;
        border-bottom: 1px solid var(--light);
      }

      .stat-row:last-child {
        border-bottom: none;
      }

      .stat-label {
        color: #666;
        font-size: 0.9rem;
      }

      .stat-value {
        font-weight: 700;
        color: var(--secondary);
      }

      /* Timeline */
      .timeline {
        position: relative;
        padding: 2rem 0;
      }

      .timeline-item {
        display: flex;
        gap: 1.5rem;
        margin-bottom: 2rem;
        position: relative;
      }

      .timeline-marker {
        width: 40px;
        height: 40px;
        background: var(--primary);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 700;
        flex-shrink: 0;
      }

      .timeline-content {
        flex: 1;
        background: white;
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .timeline-content h4 {
        color: var(--secondary);
        margin-bottom: 0.5rem;
      }

      /* Progress Bar */
      .progress-bar {
        width: 100%;
        height: 30px;
        background: var(--light);
        border-radius: 15px;
        overflow: hidden;
        margin: 1rem 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--success), var(--accent));
        transition: width 0.5s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 700;
        font-size: 0.85rem;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .input-grid {
          grid-template-columns: 1fr;
        }

        .tool-tabs {
          flex-direction: column;
        }

        .tab-btn {
          width: 100%;
          justify-content: center;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav>
      <div class="nav-container">
        <a href="/" class="logo">ENDURANCE</a>
        <ul class="nav-links">
          <li><a href="/">Home</a></li>
          <li><a href="/calendar">Calendar</a></li>
          <li><a href="/tools">Tools</a></li>
          <li><a href="#blog">Blog</a></li>
        </ul>
      </div>
    </nav>

    <!-- Header -->
    <header class="page-header">
      <h1>🔧 Racing Tools</h1>
      <p>
        Professional calculators and simulators for endurance racing strategy
      </p>
    </header>

    <!-- Main Content -->
    <div class="tools-container">
      <!-- Tool Tabs -->
      <div class="tool-tabs">
        <button class="tab-btn active" data-tool="pitstop">
          ⛽ Pit Stop Calculator
        </button>
        <button class="tab-btn" data-tool="prediction">
          🎯 Race Prediction
        </button>
        <button class="tab-btn" data-tool="fuel">⚡ Fuel Strategy</button>
        <button class="tab-btn" data-tool="dashboard">📊 Live Dashboard</button>
      </div>

      <!-- Pit Stop Calculator -->
      <div class="tool-section active" id="pitstop">
        <div class="tool-card">
          <h2>⛽ Pit Stop Strategy Calculator</h2>
          <p style="color: #666; margin-bottom: 2rem">
            Calculate optimal pit stop windows and total race time based on your
            strategy.
          </p>

          <div class="input-grid">
            <div class="input-group">
              <label>Race Duration (hours)</label>
              <input type="number" id="raceDuration" value="24" min="1" />
            </div>
            <div class="input-group">
              <label>Lap Time (seconds)</label>
              <input type="number" id="lapTime" value="120" min="30" />
            </div>
            <div class="input-group">
              <label>Fuel Tank Capacity (liters)</label>
              <input type="number" id="tankCapacity" value="75" min="20" />
            </div>
            <div class="input-group">
              <label>Fuel Consumption (L/lap)</label>
              <input
                type="number"
                id="fuelConsumption"
                value="2.5"
                step="0.1"
                min="0.5"
              />
            </div>
            <div class="input-group">
              <label>Pit Stop Time (seconds)</label>
              <input type="number" id="pitStopTime" value="90" min="30" />
            </div>
            <div class="input-group">
              <label>Driver Stint Length (minutes)</label>
              <input type="number" id="stintLength" value="90" min="30" />
            </div>
          </div>

          <button class="btn-primary" onclick="calculatePitStrategy()">
            Calculate Strategy
          </button>

          <div class="results-panel" id="pitResults" style="display: none">
            <h3>📋 Strategy Results</h3>
            <div class="results-grid">
              <div class="result-item">
                <div class="result-label">Total Laps</div>
                <div class="result-value" id="totalLaps">0</div>
              </div>
              <div class="result-item">
                <div class="result-label">Required Pit Stops</div>
                <div class="result-value" id="totalPits">0</div>
              </div>
              <div class="result-item">
                <div class="result-label">Laps per Stint</div>
                <div class="result-value" id="lapsPerStint">0</div>
              </div>
              <div class="result-item">
                <div class="result-label">Total Pit Time</div>
                <div class="result-value" id="totalPitTime">0m</div>
              </div>
            </div>

            <div class="timeline" id="pitTimeline"></div>
          </div>
        </div>
      </div>

      <!-- Race Prediction -->
      <div class="tool-section" id="prediction">
        <div class="tool-card">
          <h2>🎯 Race Position Predictor</h2>
          <p style="color: #666; margin-bottom: 2rem">
            Predict final positions based on current pace and strategy.
          </p>

          <div class="input-grid">
            <div class="input-group">
              <label>Current Position</label>
              <input type="number" id="currentPos" value="5" min="1" max="60" />
            </div>
            <div class="input-group">
              <label>Laps Completed</label>
              <input type="number" id="lapsCompleted" value="50" min="1" />
            </div>
            <div class="input-group">
              <label>Total Race Laps</label>
              <input type="number" id="totalRaceLaps" value="200" min="10" />
            </div>
            <div class="input-group">
              <label>Your Avg Lap Time (s)</label>
              <input type="number" id="yourLapTime" value="118" step="0.1" />
            </div>
            <div class="input-group">
              <label>Leader Avg Lap Time (s)</label>
              <input type="number" id="leaderLapTime" value="117" step="0.1" />
            </div>
            <div class="input-group">
              <label>Remaining Pit Stops</label>
              <input type="number" id="remainingPits" value="2" min="0" />
            </div>
          </div>

          <button class="btn-primary" onclick="predictRace()">
            Predict Position
          </button>

          <div
            class="results-panel"
            id="predictionResults"
            style="display: none"
          >
            <h3>🏁 Race Prediction</h3>
            <div class="results-grid">
              <div class="result-item">
                <div class="result-label">Predicted Position</div>
                <div class="result-value" id="predictedPos">-</div>
              </div>
              <div class="result-item">
                <div class="result-label">Gap to Leader</div>
                <div class="result-value" id="gapToLeader">-</div>
              </div>
              <div class="result-item">
                <div class="result-label">Position Change</div>
                <div class="result-value" id="posChange">-</div>
              </div>
              <div class="result-item">
                <div class="result-label">Probability</div>
                <div class="result-value" id="probability">-</div>
              </div>
            </div>

            <div style="margin-top: 2rem">
              <h4 style="margin-bottom: 1rem">Race Progress</h4>
              <div class="progress-bar">
                <div class="progress-fill" id="raceProgress">0%</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Fuel Strategy -->
      <div class="tool-section" id="fuel">
        <div class="tool-card">
          <h2>⚡ Fuel Strategy Optimizer</h2>
          <p style="color: #666; margin-bottom: 2rem">
            Optimize fuel load and calculate fuel saving requirements.
          </p>

          <div class="input-grid">
            <div class="input-group">
              <label>Remaining Race Time (min)</label>
              <input type="number" id="remainingTime" value="360" min="10" />
            </div>
            <div class="input-group">
              <label>Current Fuel (liters)</label>
              <input type="number" id="currentFuel" value="45" min="0" />
            </div>
            <div class="input-group">
              <label>Tank Capacity (liters)</label>
              <input type="number" id="fuelTankCap" value="75" min="20" />
            </div>
            <div class="input-group">
              <label>Consumption Rate (L/lap)</label>
              <input
                type="number"
                id="consumptionRate"
                value="2.5"
                step="0.1"
              />
            </div>
            <div class="input-group">
              <label>Average Lap Time (s)</label>
              <input type="number" id="avgLapTime" value="120" min="30" />
            </div>
            <div class="input-group">
              <label>Pit Stop Duration (s)</label>
              <input type="number" id="pitDuration" value="90" min="30" />
            </div>
          </div>

          <button class="btn-primary" onclick="calculateFuelStrategy()">
            Optimize Strategy
          </button>

          <div class="results-panel" id="fuelResults" style="display: none">
            <h3>⚡ Fuel Strategy</h3>
            <div class="results-grid">
              <div class="result-item">
                <div class="result-label">Laps Remaining</div>
                <div class="result-value" id="lapsRemaining">0</div>
              </div>
              <div class="result-item">
                <div class="result-label">Fuel Stops Needed</div>
                <div class="result-value" id="fuelStops">0</div>
              </div>
              <div class="result-item">
                <div class="result-label">Fuel to Add</div>
                <div class="result-value" id="fuelToAdd">0L</div>
              </div>
              <div class="result-item">
                <div class="result-label">Saving Required</div>
                <div class="result-value" id="savingReq">0%</div>
              </div>
            </div>

            <div style="margin-top: 2rem">
              <h4 style="margin-bottom: 1rem">Fuel Level</h4>
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  id="fuelLevel"
                  style="background: linear-gradient(90deg, #e63946, #f77f00)"
                >
                  0%
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Live Dashboard -->
      <div class="tool-section" id="dashboard">
        <div class="tool-card">
          <h2>📊 Live Race Dashboard</h2>
          <p style="color: #666; margin-bottom: 2rem">
            Real-time race monitoring and analytics.
          </p>

          <div class="dashboard-grid">
            <div class="dashboard-card">
              <h3>🏎️ Current Stint</h3>
              <div class="stat-row">
                <span class="stat-label">Laps Completed</span>
                <span class="stat-value">28</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">Current Pace</span>
                <span class="stat-value">2:01.234</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">Fuel Remaining</span>
                <span class="stat-value">38.5L</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">Tire Age</span>
                <span class="stat-value">45 laps</span>
              </div>
            </div>

            <div class="dashboard-card">
              <h3>📈 Performance</h3>
              <div class="stat-row">
                <span class="stat-label">Best Lap</span>
                <span class="stat-value">1:59.842</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">Average Lap</span>
                <span class="stat-value">2:01.156</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">Sector 1</span>
                <span class="stat-value">38.234s</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">Consistency</span>
                <span class="stat-value">98.2%</span>
              </div>
            </div>

            <div class="dashboard-card">
              <h3>🏁 Race Position</h3>
              <div class="stat-row">
                <span class="stat-label">Overall</span>
                <span class="stat-value">P3</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">In Class</span>
                <span class="stat-value">P1</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">Gap to Leader</span>
                <span class="stat-value">-1 LAP</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">Gap Behind</span>
                <span class="stat-value">+15.2s</span>
              </div>
            </div>

            <div class="dashboard-card">
              <h3>⏱️ Strategy</h3>
              <div class="stat-row">
                <span class="stat-label">Next Pit In</span>
                <span class="stat-value">18 laps</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">Total Pit Stops</span>
                <span class="stat-value">12 / 18</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">Driver Stint</span>
                <span class="stat-value">1:24:00</span>
              </div>
              <div class="stat-row">
                <span class="stat-label">Track Status</span>
                <span class="stat-value" style="color: #06d6a0">GREEN</span>
              </div>
            </div>
          </div>

          <div
            style="
              margin-top: 2rem;
              text-align: center;
              padding: 2rem;
              background: var(--light);
              border-radius: 12px;
            "
          >
            <p style="font-size: 1.1rem; color: #666">
              💡 <strong>Pro Tip:</strong> Monitor fuel consumption closely in
              the final hours. A 2% saving can eliminate one pit stop!
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Tab switching
      document.querySelectorAll(".tab-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          document
            .querySelectorAll(".tab-btn")
            .forEach((b) => b.classList.remove("active"));
          document
            .querySelectorAll(".tool-section")
            .forEach((s) => s.classList.remove("active"));

          btn.classList.add("active");
          document.getElementById(btn.dataset.tool).classList.add("active");
        });
      });

      // Pit Stop Calculator
      function calculatePitStrategy() {
        const raceDuration = parseFloat(
          document.getElementById("raceDuration").value
        );
        const lapTime = parseFloat(document.getElementById("lapTime").value);
        const tankCapacity = parseFloat(
          document.getElementById("tankCapacity").value
        );
        const fuelConsumption = parseFloat(
          document.getElementById("fuelConsumption").value
        );
        const pitStopTime = parseFloat(
          document.getElementById("pitStopTime").value
        );
        const stintLength = parseFloat(
          document.getElementById("stintLength").value
        );

        const totalLaps = Math.floor((raceDuration * 3600) / lapTime);
        const lapsPerTank = Math.floor(tankCapacity / fuelConsumption);
        const lapsPerStint = Math.floor((stintLength * 60) / lapTime);
        const actualStint = Math.min(lapsPerTank, lapsPerStint);
        const totalPits = Math.ceil(totalLaps / actualStint) - 1;
        const totalPitTimeMin = Math.floor((totalPits * pitStopTime) / 60);

        document.getElementById("totalLaps").textContent = totalLaps;
        document.getElementById("totalPits").textContent = totalPits;
        document.getElementById("lapsPerStint").textContent = actualStint;
        document.getElementById("totalPitTime").textContent =
          totalPitTimeMin + "m";

        // Generate timeline
        let timeline = "";
        let currentLap = 0;
        for (let i = 0; i <= totalPits; i++) {
          const stintLaps = Math.min(actualStint, totalLaps - currentLap);
          const hours = Math.floor((currentLap * lapTime) / 3600);
          const minutes = Math.floor(((currentLap * lapTime) % 3600) / 60);

          timeline += `
                    <div class="timeline-item">
                        <div class="timeline-marker">${i + 1}</div>
                        <div class="timeline-content">
                            <h4>Stint ${i + 1} - Lap ${currentLap + 1} to ${
            currentLap + stintLaps
          }</h4>
                            <p style="color: #666;">Time: ${hours}h ${minutes}m | ${stintLaps} laps | ${(
            stintLaps * fuelConsumption
          ).toFixed(1)}L fuel</p>
                        </div>
                    </div>
                `;
          currentLap += stintLaps;
        }

        document.getElementById("pitTimeline").innerHTML = timeline;
        document.getElementById("pitResults").style.display = "block";
      }

      // Race Prediction
      function predictRace() {
        const currentPos = parseInt(
          document.getElementById("currentPos").value
        );
        const lapsCompleted = parseInt(
          document.getElementById("lapsCompleted").value
        );
        const totalRaceLaps = parseInt(
          document.getElementById("totalRaceLaps").value
        );
        const yourLapTime = parseFloat(
          document.getElementById("yourLapTime").value
        );
        const leaderLapTime = parseFloat(
          document.getElementById("leaderLapTime").value
        );
        const remainingPits = parseInt(
          document.getElementById("remainingPits").value
        );

        const lapsRemaining = totalRaceLaps - lapsCompleted;
        const timeDiffPerLap = yourLapTime - leaderLapTime;
        const totalTimeDiff = timeDiffPerLap * lapsRemaining;
        const pitTimeLoss = remainingPits * 90;
        const netTimeDiff = totalTimeDiff + pitTimeLoss;

        const positionsGained = Math.floor(-netTimeDiff / 120);
        const predictedPos = Math.max(
          1,
          Math.min(currentPos + positionsGained, 60)
        );
        const posChange = currentPos - predictedPos;
        const gapSeconds = Math.abs(netTimeDiff);
        const gapLaps = Math.floor(gapSeconds / yourLapTime);

        document.getElementById("predictedPos").textContent =
          "P" + predictedPos;
        document.getElementById("gapToLeader").textContent = gapLaps + " laps";
        document.getElementById("posChange").textContent =
          (posChange > 0 ? "+" : "") + posChange;
        document.getElementById("probability").textContent =
          85 - Math.abs(posChange) * 5 + "%";

        const progress = (lapsCompleted / totalRaceLaps) * 100;
        document.getElementById("raceProgress").style.width = progress + "%";
        document.getElementById("raceProgress").textContent =
          progress.toFixed(1) + "%";

        document.getElementById("predictionResults").style.display = "block";
      }

      // Fuel Strategy
      function calculateFuelStrategy() {
        const remainingTime = parseFloat(
          document.getElementById("remainingTime").value
        );
        const currentFuel = parseFloat(
          document.getElementById("currentFuel").value
        );
        const fuelTankCap = parseFloat(
          document.getElementById("fuelTankCap").value
        );
        const consumptionRate = parseFloat(
          document.getElementById("consumptionRate").value
        );
        const avgLapTime = parseFloat(
          document.getElementById("avgLapTime").value
        );
        const pitDuration = parseFloat(
          document.getElementById("pitDuration").value
        );

        const lapsRemaining = Math.floor((remainingTime * 60) / avgLapTime);
        const fuelNeeded = lapsRemaining * consumptionRate;
        const lapsWithCurrentFuel = Math.floor(currentFuel / consumptionRate);
        const fuelStops = Math.max(
          0,
          Math.ceil((fuelNeeded - currentFuel) / fuelTankCap)
        );
        const fuelToAdd = Math.min(
          fuelTankCap - currentFuel,
          fuelNeeded - currentFuel
        );
        const savingReq = Math.max(
          0,
          ((fuelNeeded - currentFuel - fuelTankCap * fuelStops) / fuelNeeded) *
            100
        );

        document.getElementById("lapsRemaining").textContent = lapsRemaining;
        document.getElementById("fuelStops").textContent = fuelStops;
        document.getElementById("fuelToAdd").textContent =
          fuelToAdd.toFixed(1) + "L";
        document.getElementById("savingReq").textContent =
          savingReq.toFixed(1) + "%";

        const fuelPercent = (currentFuel / fuelTankCap) * 100;
        document.getElementById("fuelLevel").style.width = fuelPercent + "%";
        document.getElementById("fuelLevel").textContent =
          fuelPercent.toFixed(0) + "%";

        document.getElementById("fuelResults").style.display = "block";
      }
    </script>
  </body>
</html>
