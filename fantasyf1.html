<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>F1 Fantasy League</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background-color: #f4f4f4;
    }
    header {
      background-color: #333;
      color: #fff;
      padding: 1rem;
      text-align: center;
    }
    .container {
      max-width: 900px;
      margin: 2rem auto;
      background: #fff;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      margin-top: 0;
    }
    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
    }
    .tab {
      cursor: pointer;
      padding: 0.75rem 1.5rem;
      background: #ddd;
      margin: 0 0.5rem;
      border-radius: 4px;
      transition: background 0.3s ease;
    }
    .tab.active {
      background: #333;
      color: #fff;
    }
    .leaderboard {
      display: none;
      margin-bottom: 2rem;
    }
    .leaderboard.active {
      display: block;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 0.75rem;
      text-align: center;
    }
    th {
      background-color: #333;
      color: white;
    }
    form {
      margin-top: 2rem;
    }
    label {
      display: block;
      margin-top: 1rem;
    }
    input, select {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
    }
    .flex-container {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .budget {
      font-weight: bold;
      color: green;
    }
    .submit-btn {
      background-color: #333;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      margin-top: 1rem;
      cursor: pointer;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <h1>F1 Fantasy League</h1>
  </header>

  <div class="container">
    <!-- Leaderboard Tabs -->
    <div class="tabs">
      <div class="tab active" data-tab="actualF1">Actual F1 Leaderboard</div>
      <div class="tab" data-tab="fantasyUsers">User Fantasy Leaderboard</div>
    </div>

    <!-- Actual F1 Leaderboard -->
    <div id="actualF1" class="leaderboard active">
      <h2>Actual F1 Leaderboard</h2>
      <!-- This table can show drivers, constructors and performance package stats -->
      <table>
        <thead>
          <tr>
            <th>Rank</th>
            <th>Driver/Team</th>
            <th>Points</th>
          </tr>
        </thead>
        <tbody>
          <!-- Sample data: replace with dynamic F1 leaderboard -->
          <tr>
            <td>1</td>
            <td>Max Verstappen</td>
            <td>240</td>
          </tr>
          <tr>
            <td>2</td>
            <td>Lewis Hamilton</td>
            <td>230</td>
          </tr>
          <tr>
            <td>3</td>
            <td>Mercedes (Constructors)</td>
            <td>450</td>
          </tr>
          <tr>
            <td>4</td>
            <td>Performance Package</td>
            <td>90</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- User Fantasy Leaderboard -->
    <div id="fantasyUsers" class="leaderboard">
      <h2>User Fantasy Leaderboard</h2>
      <table>
        <thead>
          <tr>
            <th>Rank</th>
            <th>User</th>
            <th>Total Points</th>
          </tr>
        </thead>
        <tbody>
          <!-- Sample data: replace with dynamic data from your Google Sheets -->
          <tr>
            <td>1</td>
            <td>Alice</td>
            <td>150</td>
          </tr>
          <tr>
            <td>2</td>
            <td>Bob</td>
            <td>130</td>
          </tr>
          <tr>
            <td>3</td>
            <td>Charlie</td>
            <td>115</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Submission Form -->
    <div id="submission">
      <h2>Submit Your Team & Drivers</h2>
      <p>Build your team by selecting 2 drivers, 1 team, and bonus packages. Use your budget wisely!</p>
      <form id="fantasyForm">
        <label for="userName">Your Name:</label>
        <input type="text" id="userName" name="userName" placeholder="Enter your name" required />

        <div class="flex-container">
          <div style="flex: 1;">
            <label for="driver1">Driver 1:</label>
            <select id="driver1" name="driver1">
              <option value="">Select Driver 1</option>
              <option value="hamilton">Hamilton</option>
              <option value="verstappen">Verstappen</option>
              <option value="vettel">Vettel</option>
              <!-- Add more drivers -->
            </select>
          </div>
          <div style="flex: 1;">
            <label for="driver2">Driver 2:</label>
            <select id="driver2" name="driver2">
              <option value="">Select Driver 2</option>
              <option value="hamilton">Hamilton</option>
              <option value="verstappen">Verstappen</option>
              <option value="vettel">Vettel</option>
              <!-- Add more drivers -->
            </select>
          </div>
        </div>

        <label for="team">Team:</label>
        <select id="team" name="team">
          <option value="">Select Team</option>
          <option value="mercedes">Mercedes</option>
          <option value="redbull">Red Bull</option>
          <option value="ferrari">Ferrari</option>
          <!-- Add more teams -->
        </select>

        <!-- Bonus Package Selections -->
        <fieldset style="margin-top: 1rem;">
          <legend>Bonus Packages (Spend your points wisely!)</legend>
          <label for="fastestLap">Fastest Lap Bonus Points:</label>
          <select id="fastestLap" name="fastestLap">
            <option value="0">None</option>
            <option value="10">Small (10 pts)</option>
            <option value="20">Medium (20 pts)</option>
            <option value="30">Large (30 pts)</option>
          </select>

          <label for="qualifying">Qualifying Bonus Points:</label>
          <select id="qualifying" name="qualifying">
            <option value="0">None</option>
            <option value="10">Small (10 pts)</option>
            <option value="20">Medium (20 pts)</option>
            <option value="30">Large (30 pts)</option>
          </select>

          <label for="noContact">No Contact Bonus Points:</label>
          <select id="noContact" name="noContact">
            <option value="0">None</option>
            <option value="10">Small (10 pts)</option>
            <option value="20">Medium (20 pts)</option>
            <option value="30">Large (30 pts)</option>
          </select>
        </fieldset>

        <!-- Budget Display -->
        <p>Your Budget: <span class="budget" id="budgetDisplay">100</span> points</p>

        <!-- Hidden input to track any penalty if changes are made -->
        <input type="hidden" id="penalty" name="penalty" value="0" />

        <button type="submit" class="submit-btn">Submit/Update Selections</button>
      </form>
    </div>
  </div>

  <!-- JavaScript: Handling Tabs, Form Submission, Budget, and Leaderboard Updates -->
  <script>
    // Tab switching logic
    const tabs = document.querySelectorAll('.tab');
    const leaderboards = document.querySelectorAll('.leaderboard');

    tabs.forEach(tab => {
      tab.addEventListener('click', function() {
        // Remove active state from all tabs and leaderboards
        tabs.forEach(t => t.classList.remove('active'));
        leaderboards.forEach(lb => lb.classList.remove('active'));
        // Set active state on the clicked tab and its corresponding leaderboard
        tab.classList.add('active');
        document.getElementById(tab.getAttribute('data-tab')).classList.add('active');
      });
    });

    // Example starting budget (could be adjusted)
    let budget = 100;

    // Function to update budget display (this is a placeholder; you can add calculations based on selections)
    function updateBudget() {
      // Placeholder: Deduct cost based on selected options (implement your own logic)
      const selectedFastestLap = parseInt(document.getElementById('fastestLap').value);
      const selectedQualifying = parseInt(document.getElementById('qualifying').value);
      const selectedNoContact = parseInt(document.getElementById('noContact').value);

      // Simple example: subtract bonus package cost from budget
      const totalSpent = selectedFastestLap + selectedQualifying + selectedNoContact;
      const remainingBudget = budget - totalSpent;
      document.getElementById('budgetDisplay').textContent = remainingBudget;
    }

    // Listen to bonus package changes
    document.getElementById('fastestLap').addEventListener('change', updateBudget);
    document.getElementById('qualifying').addEventListener('change', updateBudget);
    document.getElementById('noContact').addEventListener('change', updateBudget);

    // Form submission handling
    document.getElementById('fantasyForm').addEventListener('submit', function(event) {
      event.preventDefault();

      // Gather form data
      const userData = {
        name: document.getElementById('userName').value,
        driver1: document.getElementById('driver1').value,
        driver2: document.getElementById('driver2').value,
        team: document.getElementById('team').value,
        fastestLapBonus: document.getElementById('fastestLap').value,
        qualifyingBonus: document.getElementById('qualifying').value,
        noContactBonus: document.getElementById('noContact').value,
        penalty: document.getElementById('penalty').value,
        // Score will be updated later based on race data
        score: 0
      };

      // TODO: Integrate with Google Sheets API here.
      // Example: Use fetch() to send userData to your Google Sheets backend via an Apps Script Web App.
      console.log("User data to be sent to Google Sheets:", userData);
      alert("Your selections have been submitted/updated!");

      // Optionally update the leaderboard by re-fetching data from Google Sheets
      // fetchLeaderboardData();
    });

    // Function to fetch leaderboard data from Google Sheets (placeholder example)
    function fetchLeaderboardData() {
      // TODO: Implement fetch logic using Google Sheets API or Apps Script
      // Then update the leaderboard tables dynamically.
      console.log("Fetching leaderboard data...");
    }

    // Optional: Call fetchLeaderboardData on page load to populate leaderboard
    window.onload = function() {
      fetchLeaderboardData();
    }
  </script>
</body>
</html>
